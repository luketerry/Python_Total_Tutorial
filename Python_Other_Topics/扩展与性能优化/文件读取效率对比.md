
pythonå¸¸ç”¨äºæ•°æ®æ“ä½œ,åœ¨ä¸è€ƒè™‘ä½¿ç”¨pandasç­‰ç¬¬ä¸‰æ–¹åŒ…çš„æƒ…å†µä¸‹æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æŠŠæ–‡ä»¶ä¸­çš„è¡¨æ ¼æ•°æ®è½¬åŒ–ä¸ºäºŒç»´åˆ—è¡¨,è¿™ä¸ªæ“ä½œä¸€èˆ¬å¯ä»¥ç”¨ä»¥ä¸‹3ç§æ–¹å¼:

+ å¹²è¯»å¹²å¤„ç†
+ ä½¿ç”¨linecacheæ¨¡å—è¯»å–ç„¶åå¤„ç†
+ å¹²è¯»+csvæ¨¡å—å¤„ç†



```python
!ls -lht 
```

    total 149048
    -rw-r--r--  1 ifuwo  staff    20K  5 13 12:03 æ–‡ä»¶è¯»å–æ•ˆç‡å¯¹æ¯”.ipynb
    -rw-r--r--@ 1 ifuwo  staff   9.8M  5 13 11:08 ad.data
    -rw-r--r--@ 1 ifuwo  staff   4.4K  5 13 09:22 iris.data
    -rwxr-xr-x@ 1 ifuwo  staff    63M 11 30  2012 [31mX_train.txt[m[m



```python
!head  -n 1 iris.data
```

    5.1,3.5,1.4,0.2,Iris-setosa



```python
!head -n 1 ad.data
```

     125, 125,   1.0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,ad.



```python
!head -n 1 X_train.txt
```

    



```python
def readcache(path,spl):
    import linecache
    temp = linecache.getlines(path)
    result = map(lambda x: x.strip().lstrip().split(spl) ,temp)
    #linecache.clearcache()
    return result
        
```


```python
def readcsv(path,spl):
    import csv
    with open(path, 'rb') as csvfile:
        spamreader = list(csv.reader(csvfile,delimiter=spl))
    return spamreader
```


```python
def read(path,spl):
    with open(path, 'Ur') as f:
        temp = f.readlines()
        result = map(lambda x: x.strip().lstrip().split(spl) ,temp)
    return result
```

> å°æ–‡ä»¶


```python
%timeit read("iris.data",",")
```

    10000 loops, best of 3: 141 Âµs per loop



```python
%timeit readcache("iris.data",",")
```

    10000 loops, best of 3: 126 Âµs per loop



```python
%timeit readcsv("iris.data",",")
```

    The slowest run took 11.54 times longer than the fastest. This could mean that an intermediate result is being cached.
    10000 loops, best of 3: 116 Âµs per loop


> 10må·¦å³æ–‡ä»¶


```python
%timeit read('ad.data',",")
```

    10 loops, best of 3: 102 ms per loop



```python
%timeit readcache('ad.data',",")
```

    10 loops, best of 3: 91.7 ms per loop



```python
%timeit readcsv('ad.data',",")
```

    10 loops, best of 3: 151 ms per loop


> 50må·¦å³æ–‡ä»¶


```python
%timeit read('X_train.txt'," ")
```

    1 loop, best of 3: 419 ms per loop



```python
%timeit readcache('X_train.txt'," ")
```

    1 loop, best of 3: 353 ms per loop



```python
%timeit readcsv('X_train.txt'," ")
```

    1 loop, best of 3: 743 ms per loop


ä¸ºäº†é˜²æ­¢æ˜¯ç¼“å­˜å†…æ•°æ®é‡å¤åˆ©ç”¨,æˆ‘ä»¬å¤åˆ¶X_train.txtç„¶åé‡å‘½åå†åšæµ‹è¯•


```python
def loopreed(f,paths,spl):
    for path in paths:
        f(path,spl)
```


```python
%timeit loopreed(readcache,["1.txt","2.txt","3.txt","4.txt","5.txt","6.txt"]," ")
```

    1 loop, best of 3: 2.06 s per loop



```python
%timeit loopreed(read,["1.txt","2.txt","3.txt","4.txt","5.txt","6.txt"]," ")
```

    1 loop, best of 3: 2.85 s per loop


æœ€ç»ˆçš„ç»“æœ

åˆ†ç±»|ç¬¬ä¸€æ¬¡|ç¬¬äºŒæ¬¡|ç¬¬ä¸‰æ¬¡
---|---|---|---
cache|2.13 |2.07| 2.06
read|2.33| 2.29| 2.3

ç»“è®º:

å¯è§ä½¿ç”¨csvåŒ…å¹¶ä¸èƒ½æé«˜å¤„ç†csvæ ¼å¼æ–‡ä»¶çš„æ•ˆç‡,è€Œå¦‚æœæ–‡ä»¶è¾ƒå¤§,ä½¿ç”¨linecacheå¯ä»¥æé«˜çº¦10%~15%çš„i/oæ•ˆç‡,
